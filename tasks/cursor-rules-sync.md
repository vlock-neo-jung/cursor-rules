# Cursor Rules 동기화 기능 구현

## 1. 요구사항

### 작업 개요

- Cursor 규칙 파일들을 글로벌 설정(~/.cursor)과 동기화하는 기능 구현
- 양방향 동기화 지원 (push/pull)
- 파일 덮어쓰기 시 사용자 확인 필수

### 상세 요구사항

1. 동기화 대상

   - `.cursorrules` 파일: 현재 디렉토리 ↔ `~/.cursor/`
   - `.cursor/rules/*` 파일들: 현재 디렉토리 ↔ `~/.cursor/rules/`

2. 명령어

   - `push`: 현재 디렉토리 → ~/.cursor 복사
   - `pull`: ~/.cursor → 현재 디렉토리 복사

3. 파일 처리
   - 대상 위치에 같은 파일이 있을 경우 덮어쓰기 전 사용자 확인
   - 확인 후 진행

### 제약사항 및 고려사항

- 홈 디렉토리 접근 권한 확인 필요
- 파일 덮어쓰기 시 데이터 손실 방지
- 디렉토리 구조 유지

### 필요한 패키지

- `inquirer`: 사용자 입력(confirm) 처리
- `@types/inquirer`: TypeScript 타입 지원

## 2. 구현 분석

### 현재 구현 상태

1. 파일 시스템 작업

   - `fs-extra` 패키지 사용 중
   - 파일 복사 기능 구현되어 있음

2. CLI 인터페이스

   - `commander` 패키지 사용 중
   - 기본 CLI 구조 구현되어 있음

3. 제거 필요 기능
   - 진행 상태 표시 (`cli-progress`)
   - resources 관련 코드

### 수정 필요 사항

1. CLI 명령어 구조

   - `push`/`pull` 서브커맨드 추가
   - 옵션 제거 (`-t, --target`)

2. 파일 처리 로직
   - 홈 디렉토리 경로 처리
   - 파일 존재 여부 확인
   - 사용자 확인 프롬프트

## 3. 작업 계획

### 1. 프로젝트 설정

- [ ] 불필요한 코드 제거
  - `src/utils/progress.ts` 삭제
  - `cli-progress` 패키지 제거
- [ ] 새로운 패키지 설치
  - `inquirer` 및 타입 설치

### 2. 유틸리티 구현

- [ ] `src/utils/path.ts` 생성
  - 홈 디렉토리 경로 처리
  - 파일 경로 생성
- [ ] `src/utils/file.ts` 생성
  - 파일 복사 함수
  - 디렉토리 생성 함수

### 3. CLI 인터페이스 수정

- [ ] `src/bin/cli.ts` 수정
  - 서브커맨드 구조 추가
  - 기존 코드 제거

### 4. 동기화 기능 구현

- [ ] `src/utils/sync.ts` 생성
  - push 함수 구현
  - pull 함수 구현
  - 사용자 확인 로직 구현

### 5. 테스트 및 문서화

- [ ] 테스트 코드 작성
- [ ] README.md 업데이트

## 4. 작업 진행

- [ ] 1. 프로젝트 설정
- [ ] 2. 유틸리티 구현
- [ ] 3. CLI 인터페이스 수정
- [ ] 4. 동기화 기능 구현
- [ ] 5. 테스트 및 문서화
